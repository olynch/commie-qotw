<html>
	<head>
		<link href = '/Flat-UI/dist/css/vendor/bootstrap.min.css' rel = 'stylesheet' />
		<link href = '/Flat-UI/dist/css/flat-ui.min.css' rel = 'stylesheet' />
		<script src = '/js/jquery.js'></script>
		<script src = '/js/nav.js'></script>
		<link href = '/css/stylesheet.css' rel = 'stylesheet' />
		<title>QOTW</title>
		<style>
			button#submit {
				position:relative;
				top:10px;
			}
		</style>
		<script>
			$(document).ready(function() {
				$('textarea#quote').keyup(function(e) {
					if (e.which == 13) submit();
					else {
						if ($(this).val()) $('button#submit').removeClass('btn-default').addClass('btn-success');
						else $('button#submit').removeClass('btn-success').addClass('btn-default');
					}
				});
				function submit() {
					if (!$('button#submit').hasClass('btn-success')) return;
					$('button#submit').removeClass('btn-success').addClass('btn-warning');
					$('textarea#quote').val('');
					$.ajax({
						'url': '/submit',
						'type': 'POST',
						'data': $('textarea#quote').val(),
						'dataType': 'json',
						'success': function(server_response) {
							if (server_response.success) $('button#submit').removeClass('btn-warning').addClass('btn-success');
							else $('button#submit').removeClass('btn-warning').addClass('btn-danger');
						},
						'error': function() {
							$('button#submit').removeClass('btn-warning').addClass('btn-danger');
							setTimeout(function() {
								$('button#submit').removeClass('btn-danger').addClass('btn-default');
							}, 1000);
						}
					});
				}
				$('button#submit').click(submit);
			});
		</script>
	</head>
	<body>
		<div id = 'body'>
			<div class = 'row'>
				<div class = 'col-md-6'>
					<div class = 'panel panel-default'>
						<div class = 'panel-heading'>Most recent post</div>
						<div class = 'panel-body'>...</div>
					</div>
				</div>
				<div class = 'col-md-6'>
					<div class = 'panel panel-default'>
						<div class = 'panel-heading'>Submit</div>
						<div class = 'panel-body'>
							<textarea class = 'form-control' id = 'quote' placeholder = 'Quote' rows = 5></textarea>
							<button class = 'btn btn-default' id = 'submit'>Submit</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>